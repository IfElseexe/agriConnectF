<div class="messages-container">
  <div class="sidebar">
    <div class="header">Chats</div>
    <div *ngFor="let conv of conversations" 
         (click)="selectConversation(conv)" 
         [class.active]="selectedConv?.id === conv.id"
         class="conversation-tile">
      <img [src]="conv.avatar || 'assets/img/user.png'" class="avatar" alt="avatar" />
      <div class="info">
        <div class="name">{{ conv.name }}</div>
        <div class="last-msg" *ngIf="conv.lastMessage">{{ conv.lastMessage.content }}</div>
      </div>
    </div>
  </div>

  <div class="chat-area" *ngIf="selectedConv">
    <div class="chat-header">
      <img [src]="selectedConv.avatar || 'assets/img/user.png'" class="avatar" />
      <span class="chat-name">{{ selectedConv.name }}</span>
    </div>

    <div class="chat-messages">
      <div *ngIf="loadingMessages" class="loading">Loading messages...</div>
      <div *ngIf="!loadingMessages && messages.length === 0" class="empty">No messages yet.</div>
      <div *ngFor="let msg of messages" [class.self]="msg.isMine" class="message">
        <div class="content">{{ msg.content }}</div>
        <div class="timestamp">{{ msg.createdAt | date:'shortTime' }}</div>
      </div>
    </div>

    <div class="chat-input">
      <input type="text" placeholder="Type a message..." [(ngModel)]="newMessage" (keydown.enter)="sendMessage()" />
      <button (click)="sendMessage()"><fa-icon [icon]="'paper-plane'"></fa-icon></button>
    </div>
  </div>

  <div class="empty-chat" *ngIf="!selectedConv">
    <p>Select a conversation to start chatting</p>
  </div>
</div>
